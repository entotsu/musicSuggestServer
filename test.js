// Generated by CoffeeScript 1.7.1
(function() {
  var Stream, clog, getloop, stream;

  clog = function(s) {
    return console.log(s);
  };

  clog("============= test.coffee =================");

  Stream = require("./stream.js");

  getloop = function(stream) {
    return setTimeout(((function(_this) {
      return function() {
        var newTracks;
        newTracks = stream.popTracks(10);
        console.log(newTracks);
        return getloop(stream);
      };
    })(this)), stream.firstRequestDelay + (10000 * Math.random()));
  };

  stream = new Stream("ELLEGARDEN");

  getloop(stream);

  setTimeout((function(_this) {
    return function() {
      stream.stop();
      return setTimeout(function() {
        return stream = null;
      }, 1000);
    };
  })(this), 1000 * 40);

}).call(this);
